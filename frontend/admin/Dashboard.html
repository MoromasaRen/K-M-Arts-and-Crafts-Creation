<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto+Mono&family=League+Spartan:wght@100..900&display=swap"
      rel="stylesheet"
    />
      <style>
        body {
          font-family: "Roboto Mono", monospace;
        }

        @keyframes fadeIn {
          from {
            opacity: 0;
            transform: scale(0.95);
          }
          to {
            opacity: 1;
            transform: scale(1);
          }
        }

        .animate-fadeIn {
          animation: fadeIn 0.3s ease-out forwards;
        }
      </style>
  </head>

  <body class="bg-[#d3e1f9] min-h-screen flex">
    <!-- Sidebar -->
    <aside class="bg-white w-[350px] flex flex-col p-6">
      <div class="mb-6">
        <img
          src="/K-M-Arts-and-Crafts-Creation/assets/Logo.png"
          alt="Logo K and M Arts and Crafts"
          class="w-[300px] h-[100px] object-contain"
        />
      </div>
      <div class="flex items-center space-x-4 mb-4">
        <img
          src="/K-M-Arts-and-Crafts-Creation/assets/pfp.jpg"
          alt="User profile picture"
          class="w-20 h-20 rounded-full"
        />

        <!-- update here -->
        <div class="text-lg font-bold leading-tight">
            <p id="admin-role" class="text-[#0f2e4d]"></p>
            <p id="admin-name" class="text-[#0f2e4d]"></p>
          <div class="flex items-center space-x-1 text-xs font-normal">
            <span class="w-3 h-3 rounded-full bg-lime-500 inline-block"></span>
            <span class="text-[#0f2e4d]">Status: <span class="font-normal">Online</span></span>
          </div>
        </div>

      </div>
      <hr class="border-gray-500 mb-6" />
      <nav
        class="flex flex-col space-y-3 text-lg font-bold text-[#0f2e4d] tracking-wide"
      >
        <div class="pl-1 py-1 px-2 rounded text-[#0f2e4d]">Menu</div>

        <a
          href="/K-M-Arts-and-Crafts-Creation/frontend/admin/Dashboard.html"
          class="pl-4 py-1 px-2 rounded bg-blue-100"
          >Dashboard</a
        >
        <a
          href="/K-M-Arts-and-Crafts-Creation/frontend/admin/Order.php"
          class="pl-4 py-1 px-2 rounded hover:bg-blue-100 transition duration-150"
          >Orders</a
        >
        <a
          href="/K-M-Arts-and-Crafts-Creation/frontend/admin/Delivery.php"
          class="pl-4 py-1 px-2 rounded hover:bg-blue-100 transition duration-150"
          >Deliveries</a
        >
        <a
          href="/K-M-Arts-and-Crafts-Creation/frontend/admin/Inventory.php"
          class="pl-4 py-1 px-2 rounded hover:bg-blue-100 transition duration-150"
          >Inventory</a
        >
        <a
          href="/K-M-Arts-and-Crafts-Creation/frontend/admin/Profile.html"
          class="mt-6 py-1 px-2 rounded hover:bg-blue-100 transition duration-150"
          >Profile</a
        >
      </nav>
    </aside>

    <!-- Main content -->
    <main class="flex-1 p-6 flex flex-col gap-6">
      <!-- Top bar -->
      <div class="flex items-center gap-3 mb-2">
        <button aria-label="Menu" class="text-gray-900 text-xl">
          <i class="fas fa-bars"></i>
        </button>
        <h1
          class="font-bold text-gray-900 text-lg border-b border-[#0f2e4d] pb-1"
        >
          Dashboard
        </h1>
      </div>

      <!-- Cards -->
      <div class="flex flex-col sm:flex-row gap-4">
        <!-- Orders -->
        <div
          class="bg-white shadow-md rounded p-4 flex-1 min-w-[180px] flex flex-col items-center text-center"
        >
          <div class="mb-3">
            <div
              class="text-4xl text-[#0f2e4d] bg-[#d3e1f9] p-4 rounded-full shadow-md"
            >
              <i class="fas fa-box-open"></i>
            </div>
          </div>
          <p class="font-semibold text-gray-900 mb-1">
            New Orders: <span class="font-normal">10</span>
          </p>
          <p
            onclick="openModal('orders')"
            class="text-xs text-gray-600 cursor-pointer hover:underline"
          >
            More info
          </p>
        </div>

        <!-- Deliveries -->
        <div
          class="bg-white shadow-md rounded p-4 flex-1 min-w-[180px] flex flex-col items-center text-center"
        >
          <div class="mb-3">
            <div
              class="text-4xl text-[#0f2e4d] bg-[#d3e1f9] p-4 rounded-full shadow-md"
            >
              <i class="fas fa-truck"></i>
            </div>
          </div>
          <p class="font-semibold text-gray-900 mb-1">
            Deliveries: <span class="font-normal">10</span>
          </p>
          <p
            onclick="openModal('deliveries')"
            class="text-xs text-gray-600 cursor-pointer hover:underline"
          >
            More info
          </p>
        </div>

        <!-- Inventory -->
        <div
          class="bg-white shadow-md rounded p-4 flex-1 min-w-[180px] flex flex-col items-center text-center"
        >
          <div class="mb-3">
            <div
              class="text-4xl text-[#0f2e4d] bg-[#d3e1f9] p-4 rounded-full shadow-md"
            >
              <i class="fas fa-warehouse"></i>
            </div>
          </div>
          <p class="font-semibold text-gray-900 mb-1">
            Inventory Status: <span class="font-normal">Good</span>
          </p>
          <p
            onclick="openModal('inventory')"
            class="text-xs text-gray-600 cursor-pointer hover:underline"
          >
            More info
          </p>
        </div>
      </div>

<!-- Extra Info Cards -->
<div class="w-full grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mb-6">
  <!-- Remaining Orders -->
  <div class="bg-white shadow-md rounded p-4 flex items-center justify-center gap-4 w-full">
    <div class="text-3xl text-[#0f2e4d] bg-[#d3e1f9] p-4 rounded-full shadow-sm">
      <i class="fas fa-box"></i>
    </div>
    <div>
      <p class="font-semibold text-gray-900">Remaining Orders</p>
      <p class="text-sm text-gray-600">5</p>
    </div>
  </div>

  <!-- Remaining Deliveries -->
  <div class="bg-white shadow-md rounded p-4 flex items-center justify-center gap-4 w-full">
    <div class="text-3xl text-[#0f2e4d] bg-[#d3e1f9] p-4 rounded-full shadow-sm">
      <i class="fas fa-shipping-fast"></i>
    </div>
    <div>
      <p class="font-semibold text-gray-900">Remaining Deliveries</p>
      <p class="text-sm text-gray-600">3</p>
    </div>
  </div>

  <!-- Completed Orders -->
  <div class="bg-white shadow-md rounded p-4 flex items-center justify-center gap-4 w-full">
    <div class="text-3xl text-[#0f2e4d] bg-[#d3e1f9] p-4 rounded-full shadow-sm">
      <i class="fas fa-check-circle"></i>
    </div>
    <div>
      <p class="font-semibold text-gray-900">Completed Orders</p>
      <p class="text-sm text-gray-600">12</p>
    </div>
  </div>
</div>

<!-- Bottom section with Notifications and Action Buttons side by side -->
<div class="flex flex-col lg:flex-row gap-6 w-full">
  <!-- Notifications Panel -->
  <div class="bg-white shadow-md rounded p-4 w-full lg:w-2/3">
  <div class="flex justify-between items-center mb-3">
    <p class="font-semibold text-gray-900 text-lg">Notifications</p>
    <button
      aria-label="Refresh notifications"
      onclick="fetchNotifications()"
      class="text-gray-900 text-lg hover:text-blue-700 transition"
    >
      <i class="fas fa-sync-alt"></i>
    </button>
  </div>

  <!-- Notification List -->
  <ul id="notificationList" class="space-y-3 max-h-64 overflow-y-auto text-sm">
    <li class="bg-blue-50 p-3 rounded shadow-sm">
      <p class="text-gray-800">
        ðŸ›’ <strong>Order #12345</strong> placed by <strong>User_01</strong>
      </p>
      <p class="text-gray-500 text-xs">Just now</p>
    </li>
    <!-- More items dynamically added here -->
  </ul>
</div>
<!-- Action Buttons aligned to the right -->
<div class="flex flex-col gap-4 w-full lg:w-1/3">
  <button
    data-type="order"
    class="openManageModal text-blue-900 font-semibold text-lg px-6 py-4 rounded-full shadow hover:shadow-lg transition bg-white w-full"
  >
    Generate Report
  </button>
  <button
    data-type="delivery"
    class="openManageModal text-blue-900 font-semibold text-lg px-6 py-4 rounded-full shadow hover:shadow-lg transition bg-white w-full"
  >
    Schedule a Delivery
  </button>
  <button
    data-type="inventory"
    class="openManageModal text-blue-900 font-semibold text-lg px-6 py-4 rounded-full shadow hover:shadow-lg transition bg-white w-full"
  >
    Add to Inventory
  </button>
</div>

    <!-- Manage Modal -->
    <div id="manageModal" class="fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center hidden z-50">
      <form class="bg-[#d7e4ff] rounded-lg p-6 shadow-md w-[360px] relative transform transition-all duration-300 scale-95 opacity-0 animate-fadeIn">
        <button
          id="closeModalBtn"
          type="button"
          class="absolute top-2 right-2 text-[#0f2e4d] hover:text-gray-700 text-xl font-bold"
        >
          &times;
        </button>
        <h3
          id="manageModalTitle"
          class="bg-[#a9c5ff] rounded-md px-3 py-1 font-extrabold text-[15px] mb-4 inline-block"
        >
          Manage Order
        </h3>
        <div
          class="grid grid-cols-2 gap-x-6 gap-y-3 text-[13px] font-extrabold text-[#1e2f4a]"
        >
          <label class="flex flex-col gap-1">
            Order ID
            <input
              class="rounded-md border border-gray-300 px-2 py-1 text-[13px] font-normal"
              type="text"
            />
          </label>
          <label class="flex flex-col gap-1">
            Item ID
            <input
              class="rounded-md border border-gray-300 px-2 py-1 text-[13px] font-normal"
              type="text"
            />
          </label>
          <label class="flex flex-col gap-1">
            User ID
            <input
              class="rounded-md border border-gray-300 px-2 py-1 text-[13px] font-normal"
              type="text"
            />
          </label>
          <label class="flex flex-col gap-1">
            Order Details
            <input
              class="rounded-md border border-gray-300 px-2 py-1 text-[13px] font-normal"
              type="text"
            />
          </label>
          <label class="flex flex-col gap-1">
            Order Date
            <input
              class="rounded-md border border-gray-300 px-2 py-1 text-[13px] font-normal"
              type="text"
            />
          </label>
          <label class="flex flex-col gap-1">
            Total Amount
            <input
              class="rounded-md border border-gray-300 px-2 py-1 text-[13px] font-normal"
              type="text"
            />
          </label>
          <label class="flex flex-col gap-1">
            Status
            <input
              class="rounded-md border border-gray-300 px-2 py-1 text-[13px] font-normal w-full max-w-[180px]"
              type="text"
            />
          </label>
        </div>
        <div class="mt-4 space-x-3">
          <button
            type="button"
            class="bg-lime-400 text-white font-extrabold text-xs rounded px-3 py-1 shadow-md"
          >
            Create
          </button>
          <button
            type="button"
            class="bg-amber-300 text-white font-extrabold text-xs rounded px-3 py-1 shadow-md"
          >
            Update
          </button>
          <button
            type="button"
            class="bg-rose-400 text-white font-extrabold text-xs rounded px-3 py-1 shadow-md"
          >
            Delete
          </button>
        </div>
      </form>
    </div>

    <!-- Info Modal -->
    <div
      id="infoModal"
      class="fixed inset-0 z-50 bg-black bg-opacity-50 hidden justify-center items-center"
    >
      <div class="bg-white rounded-lg p-6 max-w-md w-full shadow-lg relative">
        <button
          onclick="closeModal()"
          class="absolute top-2 right-2 text-gray-400 hover:text-gray-600"
        >
          <i class="fas fa-times"></i>
        </button>
        <h2 id="modalTitle" class="text-lg font-bold mb-2 text-[#0f2e4d]">
          More Info
        </h2>
        <p id="modalContent" class="text-gray-700 text-sm mb-4">Loading...</p>
        <a
          id="modalLink"
          href="#"
          class="inline-block px-4 py-2 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition"
          >Go to Page</a
        >
      </div>
    </div>

    <!-- Welcome Modal -->
    <div
      id="welcomeModal"
      class="fixed inset-0 z-60 bg-black bg-opacity-60 hidden justify-center items-center"
    >
      <div
        class="bg-white rounded-lg p-8 max-w-sm w-full shadow-lg relative text-center"
      >
        <button
          onclick="closeWelcomeModal()"
          class="absolute top-3 right-3 text-gray-500 hover:text-gray-800"
          aria-label="Close Welcome Modal"
        >
          <i class="fas fa-times fa-lg"></i>
        </button>
        <h2 class="text-2xl font-bold mb-4 text-[#0f2e4d]">Welcome!</h2>
        <p class="text-gray-700 mb-6">
          Welcome to the Dashboard. Have a productive day Admin!
        </p>
        <button
          onclick="closeWelcomeModal()"
          class="bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700 transition"
        >
          Close
        </button>
      </div>
    </div>


    <!-- External JavaScript -->
    <script src="/K-M-Arts-and-Crafts-Creation/frontend/admin/js/modal-manage.js"></script>
    <script src="/K-M-Arts-and-Crafts-Creation/frontend/admin/js/modal-info.js"></script>
    <script src="/K-M-Arts-and-Crafts-Creation/frontend/admin/js/modal-welcome.js"></script>
    <script src="/K-M-Arts-and-Crafts-Creation/frontend/admin/js/init.js"></script>
    <script src="/K-M-Arts-and-Crafts-Creation/frontend/admin/js/animations.js"></script>
    <script src="/K-M-Arts-and-Crafts-Creation/frontend/admin/js/notifications.js"></script>

  </body>
<script>
  window.addEventListener("DOMContentLoaded", function () {
    const userId = localStorage.getItem("user_id");

    if (!userId) {
      document.getElementById("admin-role").textContent = "";
      document.getElementById("admin-name").textContent = "";
      return;
    }

    fetch(`/K-M-Arts-and-Crafts-Creation/backend/users/get_user_info.php?user_id=${userId}`)
      .then((response) => response.json())
      .then((data) => {
        if (data.success) {
          document.getElementById("admin-role").textContent = data.first_name;
          document.getElementById("admin-name").textContent = data.last_name;
        } else {
          document.getElementById("admin-role").textContent = "";
          document.getElementById("admin-name").textContent = "";
        }
      })
      .catch(() => {
        document.getElementById("admin-role").textContent = "Error";
        document.getElementById("admin-name").textContent = "Name";
      });
  });
</script>


</html>
