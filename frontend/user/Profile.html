<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta content="width=device-width, initial-scale=1" name="viewport" />
  <title>Profile Page</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono&display=swap" rel="stylesheet" />
  <script src="https://cdn.tailwindcss.com"></script>
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
  />
  <style>
    body {
      font-family: "Roboto Mono", monospace;
    }
  </style>
</head>
<body class="bg-white text-[#1a2e4a] m-0 p-0">
  <header class="flex items-center justify-between p-4 sm:p-8 bg-white w-full">
    <!-- Logo (Aligned left) -->
    <div class="flex items-center">
      <img src="/K-M-Arts-and-Crafts-Creation/assets/Logo.png" alt="KM Logo" class="w-[250px] h-auto object-contain" />
    </div>

    <!-- Navigation in the center -->
    <nav class="flex gap-8 text-[17px] font-semibold justify-center flex-wrap flex-grow">
      <a href="/K-M-Arts-and-Crafts-Creation/index.html" class="hover:bg-[#c7d9f9] px-3 py-1 rounded">Home</a>
      <a href="/K-M-Arts-and-Crafts-Creation/frontend/user/Shop.html" class="hover:bg-[#c7d9f9] px-3 py-1 rounded">Shop</a>
      <a href="/K-M-Arts-and-Crafts-Creation/frontend/user/Contacts.html" class="hover:bg-[#c7d9f9] px-3 py-1 rounded">Contact</a>
      <a href="/K-M-Arts-and-Crafts-Creation/frontend/user/About.html" class="hover:bg-[#c7d9f9] px-3 py-1 rounded">About Us</a>
      <a href="/K-M-Arts-and-Crafts-Creation/frontend/user/OrderProcess.html" class="hover:bg-[#c7d9f9] px-3 py-1 rounded">Order Process</a>
      <a href="/K-M-Arts-and-Crafts-Creation/frontend/user/GalleryAndReviews.html" class="hover:bg-[#c7d9f9] px-3 py-1 rounded">Gallery & Reviews</a>
      <a href="/K-M-Arts-and-Crafts-Creation/frontend/user/Cart.html" class="hover:bg-[#c7d9f9] px-3 py-1 rounded">Cart</a>
    </nav>

    <!-- Login button on the right -->
    <div id="auth-button" class="ml-auto flex-shrink-0"></div>
  </header>

  <!-- Responsive divider under header -->
  <div class="w-full border-t-2 border-slate-800 my-2" style="opacity: 0.3;"></div>

  <!-- Main Content -->
  <main class="max-w-7xl mx-auto mt-12 px-6 text-center">
  <div class="max-w-7xl mx-auto mb-12 grid grid-cols-1 md:grid-cols-3 gap-6 px-6">
    <div class="md:col-span-2 flex flex-col gap-6">
      <!-- Profile Top Card -->
      <section class="bg-[#b9d0f9] rounded-lg p-4 shadow-md flex items-center gap-4">
        <img
          src="/K-M-Arts-and-Crafts-Creation/assets/pfp.jpg"
          alt="User profile picture"
          class="w-16 h-16 rounded-full object-cover"
        />
        <div class="text-sm text-left flex flex-col gap-2 flex-grow">
          <p class="font-semibold text-gray-800">Username</p>
          <p class="font-semibold text-gray-600">Admin</p>
          <p class="font-semibold text-gray-600">Email</p>
          <button id="edit-personal-info" class="mt-2 self-start bg-[#1a2e4a] text-white px-4 py-1 rounded hover:bg-[#12243b] transition">
            Edit Account
          </button>
        </div>

        <a
          id="logout-btn"
          class="pl-4 py-1 px-2 rounded hover:bg-red-100 transition duration-150"
          href="#"
          >Logout</a
        >
      </section>

      <!-- Profile Details Card -->
      <!-- Editable Profile Section -->
<section id="personal-info" class="bg-white rounded-lg p-6 shadow-md grid grid-cols-2 gap-6 text-sm text-gray-800 text-left">

  <!-- Save / Cancel Buttons Row -->
  <div class="col-span-full flex justify-end gap-2 mb-4">
    <button id="save-personal-info" class="hidden bg-green-600 text-white px-3 py-1 rounded text-xs">Save</button>
    <button id="cancel-personal-info" class="hidden bg-red-600 text-white px-3 py-1 rounded text-xs">Cancel</button>
  </div>

  <!-- First Name -->
  <div>
    <p class="text-xs font-semibold tracking-widest">First Name</p>
    <p id="first-name-text" class="font-bold text-sm">Ven</p>
    <input id="first-name-input" type="text" value="Ven" class="hidden border rounded p-1 w-full" />
  </div>

  <!-- Last Name -->
  <div>
    <p class="text-xs font-semibold tracking-widest">Last Name</p>
    <p id="last-name-text" class="font-bold text-sm">Malingin</p>
    <input id="last-name-input" type="text" value="Malingin" class="hidden border rounded p-1 w-full" />
  </div>

  <!-- Date of Birth -->
  <div>
    <p class="text-xs font-semibold tracking-widest">Date Of Birth</p>
    <p id="dob-text" class="font-bold text-sm">01 - 24 - 2000</p>
    <input id="dob-input" type="date" value="2000-01-24" class="hidden border rounded p-1 w-full" />
  </div>

  <!-- Email -->
  <div>
    <p class="text-xs font-semibold tracking-widest">Email Address</p>
    <p id="email-text" class="font-bold text-sm underline">sample@gmail.com</p>
    <input id="email-input" type="email" value="sample@gmail.com" class="hidden border rounded p-1 w-full" />
  </div>

  <!-- Phone -->
  <div>
    <p class="text-xs font-semibold tracking-widest">Phone</p>
    <p id="phone-text" class="font-bold text-sm">099</p>
    <input id="phone-input" type="tel" value="099" class="hidden border rounded p-1 w-full" />
  </div>
</section>

    </div>

    <!-- My Orders Section -->
    <section class="bg-white rounded-lg shadow-md p-6 flex flex-col justify-between">
    <h2 class="text-2xl font-semibold text-left mb-4">My Orders</h2>
    <div class="grid grid-cols-1 gap-6">
      <!-- Previous Orders -->
      <div class="bg-[#f8f9fb] rounded-lg shadow-sm p-4">
        <h3 class="font-semibold mb-2 text-[#1a2e4a]">Previous Orders</h3>
        <ul class="text-sm text-gray-700 space-y-2">
          <li>Order #12345 - Delivered</li>
          <li>Order #12346 - Delivered</li>
          <li>Order #12347 - Delivered</li>
        </ul>
      </div>
      <!-- Orders to Pay -->
      <div class="bg-[#f8f9fb] rounded-lg shadow-sm p-4">
        <h3 class="font-semibold mb-2 text-[#1a2e4a]">Orders to Pay</h3>
        <ul class="text-sm text-gray-700 space-y-2">
          <li>Order #12348 - Pending Payment</li>
          <li>Order #12349 - Pending Payment</li>
        </ul>
      </div>
    </div>
  </section>
  </div>
  </main>

  <footer class="bg-[#183655] text-white py-8 mt-16">
    <div class="max-w-screen-xl mx-auto px-6 flex flex-col items-center justify-center text-center space-y-6">
      <!-- Larger Logo -->
      <img src="/K-M-Arts-and-Crafts-Creation/assets/Logo3.png" alt="KM Arts & Crafts Creation Logo" class="w-80 h-auto" />

      <!-- Larger Social Media Icons -->
      <div class="flex gap-6">
        <a href="#" aria-label="Instagram">
          <img src="/K-M-Arts-and-Crafts-Creation/assets/InstaIconWhite.png" alt="Instagram" class="w-11 h-11" />
        </a>
        <a href="#" aria-label="Facebook">
          <img src="/K-M-Arts-and-Crafts-Creation/assets/FacebookIconWhite.png" alt="Facebook" class="w-11 h-11" />
        </a>
        <a href="#" aria-label="TikTok">
          <img src="/K-M-Arts-and-Crafts-Creation/assets/TikTokIconWhite.png" alt="TikTok" class="w-11 h-11" />
        </a>
      </div>

      <!-- Copyright -->
      <p class="text-sm tracking-widest">
        2025 KM ARTS & CRAFTS. All rights reserved.
      </p>
    </div>
  </footer>

  
<script>

  const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';
  const authButton = document.getElementById('auth-button');

  if (isLoggedIn) {
    // Show profile icon
    authButton.innerHTML = `
      <a href="/K-M-Arts-and-Crafts-Creation/frontend/user/Profile.html">
        <img
          src="/K-M-Arts-and-Crafts-Creation/assets/pfp.jpg"
          alt="Profile"
          class="w-10 h-10 rounded-full object-cover border-2 border-[#1a3550]"
          title="My Profile"
        />
      </a>
    `;
  } else {
    // Show Login/Register
    authButton.innerHTML = `
      <a href="/K-M-Arts-and-Crafts-Creation/frontend/admin/Login.html">
        <button
          class="border border-[#1a2e4a] rounded-full px-5 py-1 text-[13px] font-semibold text-[#1a2e4a] hover:bg-[#c7d9f9] whitespace-nowrap"
        >
          Login/Register
        </button>
      </a>
    `;
  }

      // logout-btn
    document.getElementById("logout-btn").addEventListener("click", function (e) {
    e.preventDefault(); // Prevent default link behavior

    fetch("http://localhost/K-M-Arts-and-Crafts-Creation/backend/auth/logout.php", {
      method: "POST",
      credentials: "include" // Include session cookie
    })
      .then(res => res.text())
      .then(response => {
        // Clear localStorage values
        localStorage.removeItem("isLoggedIn");
        localStorage.removeItem("user_id");
        localStorage.removeItem("user_type");
        localStorage.removeItem("username");

        // Redirect to homepage
        window.location.href = "/K-M-Arts-and-Crafts-Creation/index.html";
      })
      .catch(err => {
        console.error("Logout failed:", err);
        alert("Something went wrong during logout.");
      });
  });


  function toggleEdit(sectionId, enable) {
    const section = document.getElementById(sectionId);
    const textFields = section.querySelectorAll('[id$="-text"]');
    const inputFields = section.querySelectorAll('[id$="-input"]');
    const editBtn = document.getElementById(`edit-${sectionId}`);
    const saveBtn = document.getElementById(`save-${sectionId}`);
    const cancelBtn = document.getElementById(`cancel-${sectionId}`);

    if (enable) {
      textFields.forEach(el => el.classList.add("hidden"));
      inputFields.forEach(el => el.classList.remove("hidden"));
      editBtn.classList.add("hidden");
      saveBtn.classList.remove("hidden");
      cancelBtn.classList.remove("hidden");
    } else {
      textFields.forEach(el => el.classList.remove("hidden"));
      inputFields.forEach(el => el.classList.add("hidden"));
      editBtn.classList.remove("hidden");
      saveBtn.classList.add("hidden");
      cancelBtn.classList.add("hidden");
    }
  }

  function cancelChanges(sectionId) {
    const section = document.getElementById(sectionId);
    const textFields = section.querySelectorAll('[id$="-text"]');
    const inputFields = section.querySelectorAll('[id$="-input"]');

    inputFields.forEach((input, i) => {
      if (textFields[i]) {
        input.value = textFields[i].textContent.trim();
      }
    });

    toggleEdit(sectionId, false);
  }

  function saveChanges(sectionId) {
    const section = document.getElementById(sectionId);
    const textFields = section.querySelectorAll('[id$="-text"]');
    const inputFields = section.querySelectorAll('[id$="-input"]');

    inputFields.forEach((input, i) => {
      if (textFields[i]) {
        textFields[i].textContent = input.value;
      }
    });

    // Update summary display (optional)
    if (sectionId === "personal-info") {
      const fname = document.getElementById("first-name-input").value;
      const lname = document.getElementById("last-name-input").value;
  
    }

    toggleEdit(sectionId, false);
  }

  // Attach events
   document.getElementById("edit-personal-info").addEventListener("click", () => toggleEdit("personal-info", true));
  document.getElementById("save-personal-info").addEventListener("click", () => saveChanges("personal-info"));
  document.getElementById("cancel-personal-info").addEventListener("click", () => cancelChanges("personal-info"));
</script>
</script>

</body>
</html>
