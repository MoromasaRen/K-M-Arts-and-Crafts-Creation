<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta content="width=device-width, initial-scale=1" name="viewport" />
  <title>Profile Page</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono&display=swap" rel="stylesheet" />
  <script src="https://cdn.tailwindcss.com"></script>
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
  />
  <style>
    body {
      font-family: "Roboto Mono", monospace;
    }
  </style>
</head>
<body class="bg-white text-[#1a2e4a] m-0 p-0">
  <header class="flex items-center justify-between p-4 sm:p-8 bg-white w-full">
    <!-- Logo (Aligned left) -->
    <div class="flex items-center">
      <img src="/K-M-Arts-and-Crafts-Creation/assets/Logo.png" alt="KM Logo" class="w-[250px] h-auto object-contain" />
    </div>

    <!-- Navigation in the center -->
    <nav class="flex gap-8 text-[17px] font-semibold justify-center flex-wrap flex-grow">
      <a href="/K-M-Arts-and-Crafts-Creation/index.html" class="hover:bg-[#c7d9f9] px-3 py-1 rounded">Home</a>
      <a href="/K-M-Arts-and-Crafts-Creation/frontend/user/Shop.html" class="hover:bg-[#c7d9f9] px-3 py-1 rounded">Shop</a>
      <a href="/K-M-Arts-and-Crafts-Creation/frontend/user/Contacts.html" class="hover:bg-[#c7d9f9] px-3 py-1 rounded">Contact</a>
      <a href="/K-M-Arts-and-Crafts-Creation/frontend/user/About.html" class="hover:bg-[#c7d9f9] px-3 py-1 rounded">About Us</a>
      <a href="/K-M-Arts-and-Crafts-Creation/frontend/user/OrderProcess.html" class="hover:bg-[#c7d9f9] px-3 py-1 rounded">Order Process</a>
      <a href="/K-M-Arts-and-Crafts-Creation/frontend/user/GalleryAndReviews.html" class="hover:bg-[#c7d9f9] px-3 py-1 rounded">Gallery & Reviews</a>
      <a href="/K-M-Arts-and-Crafts-Creation/frontend/user/Cart.html" class="hover:bg-[#c7d9f9] px-3 py-1 rounded">Cart</a>
    </nav>

    <!-- Login button on the right -->
    <div id="auth-button" class="ml-auto flex-shrink-0"></div>
  </header>

  <!-- Responsive divider under header -->
  <div class="w-full border-t-2 border-slate-800 my-2" style="opacity: 0.3;"></div>

  <!-- Main Content -->
  <main class="max-w-7xl mx-auto mt-12 px-6 text-center">
    <!-- Profile Top Card -->
    <section class="bg-[#b9d0f9] rounded-lg p-4 max-w-4xl shadow-md flex items-center gap-4 mb-6 mx-auto">
      <img
        src="/K-M-Arts-and-Crafts-Creation/assets/pfp.jpg"
        alt="User profile picture"
        class="w-16 h-16 rounded-full object-cover"
      />
      <div class="text-sm text-left flex flex-col gap-2 flex-grow">
        <p class="font-semibold text-gray-800">Username</p>
        <p class="font-semibold text-gray-600">Admin</p>
        <p class="font-semibold text-gray-600">Email</p>
        <button class="mt-2 self-start bg-[#1a2e4a] text-white px-4 py-1 rounded hover:bg-[#12243b] transition">
          Edit Account
        </button>
      </div>

        <a
          id = "logout-btn"
          class="pl-4 py-1 px-2 rounded hover:bg-red-100 transition duration-150"
          href="#"
          >Logout</a
        >
    </section>

    <!-- Profile Details Card -->
    <section class="bg-white rounded-lg p-6 max-w-4xl shadow-md grid grid-cols-2 gap-6 mb-6 text-sm text-gray-800 mx-auto text-left">
      <div>
        <p class="font-medium text-gray-600 mb-1">First Name</p>
        <p class="font-semibold">Ven</p>
      </div>
      <div>
        <p class="font-medium text-gray-600 mb-1">Last Name</p>
        <p class="font-semibold">Malingin</p>
      </div>
      <div>
        <p class="font-medium text-gray-600 mb-1">Date Of Birth</p>
        <p class="font-semibold">01 - 24 - 2000</p>
      </div>
      <div>
        <p class="font-medium text-gray-600 mb-1">Email Address</p>
        <p class="font-semibold">sample@gmail.com</p>
      </div>
      <div>
        <p class="font-medium text-gray-600 mb-1">Phone</p>
        <p class="font-semibold">099</p>
      </div>
    </section>

    <!-- My Orders Section -->
    <section class="max-w-4xl mx-auto mb-12">
      <h2 class="text-2xl font-semibold text-left mb-4">My Orders</h2>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <!-- Previous Orders Card -->
        <div class="bg-white rounded-lg shadow-md p-6">
          <h3 class="font-semibold mb-2">Previous Orders</h3>
          <ul class="text-sm text-gray-700 space-y-2">
            <li>Order #12345 - Delivered</li>
            <li>Order #12346 - Delivered</li>
            <li>Order #12347 - Delivered</li>
          </ul>
        </div>
        <!-- Orders to Pay Card -->
        <div class="bg-white rounded-lg shadow-md p-6">
          <h3 class="font-semibold mb-2">Orders to Pay</h3>
          <ul class="text-sm text-gray-700 space-y-2">
            <li>Order #12348 - Pending Payment</li>
            <li>Order #12349 - Pending Payment</li>
          </ul>
        </div>
      </div>
    </section>
  </main>

  <footer class="bg-[#183655] text-white py-8 mt-16">
    <div class="max-w-screen-xl mx-auto px-6 flex flex-col items-center justify-center text-center space-y-6">
      <!-- Larger Logo -->
      <img src="/K-M-Arts-and-Crafts-Creation/assets/Logo3.png" alt="KM Arts & Crafts Creation Logo" class="w-80 h-auto" />

      <!-- Larger Social Media Icons -->
      <div class="flex gap-6">
        <a href="#" aria-label="Instagram">
          <img src="/K-M-Arts-and-Crafts-Creation/assets/InstaIconWhite.png" alt="Instagram" class="w-11 h-11" />
        </a>
        <a href="#" aria-label="Facebook">
          <img src="/K-M-Arts-and-Crafts-Creation/assets/FacebookIconWhite.png" alt="Facebook" class="w-11 h-11" />
        </a>
        <a href="#" aria-label="TikTok">
          <img src="/K-M-Arts-and-Crafts-Creation/assets/TikTokIconWhite.png" alt="TikTok" class="w-11 h-11" />
        </a>
      </div>

      <!-- Copyright -->
      <p class="text-sm tracking-widest">
        2025 KM ARTS & CRAFTS. All rights reserved.
      </p>
    </div>
  </footer>

  
<script>

  const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';
  const authButton = document.getElementById('auth-button');

  if (isLoggedIn) {
    // Show profile icon
    authButton.innerHTML = `
      <a href="/K-M-Arts-and-Crafts-Creation/frontend/user/Profile.html">
        <img
          src="/K-M-Arts-and-Crafts-Creation/assets/pfp.jpg"
          alt="Profile"
          class="w-10 h-10 rounded-full object-cover border-2 border-[#1a3550]"
          title="My Profile"
        />
      </a>
    `;
  } else {
    // Show Login/Register
    authButton.innerHTML = `
      <a href="/K-M-Arts-and-Crafts-Creation/frontend/admin/Login.html">
        <button
          class="border border-[#1a2e4a] rounded-full px-5 py-1 text-[13px] font-semibold text-[#1a2e4a] hover:bg-[#c7d9f9] whitespace-nowrap"
        >
          Login/Register
        </button>
      </a>
    `;
  }

      // logout-btn
    document.getElementById("logout-btn").addEventListener("click", function (e) {
    e.preventDefault(); // Prevent default link behavior

    fetch("http://localhost/K-M-Arts-and-Crafts-Creation/backend/auth/logout.php", {
      method: "POST",
      credentials: "include" // Include session cookie
    })
      .then(res => res.text())
      .then(response => {
        // Clear localStorage values
        localStorage.removeItem("isLoggedIn");
        localStorage.removeItem("user_id");
        localStorage.removeItem("user_type");
        localStorage.removeItem("username");

        // Redirect to homepage
        window.location.href = "/K-M-Arts-and-Crafts-Creation/index.html";
      })
      .catch(err => {
        console.error("Logout failed:", err);
        alert("Something went wrong during logout.");
      });
  });
</script>

</body>
</html>
